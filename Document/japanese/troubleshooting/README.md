# トラブルシューティング

RPGTextでよくある問題とその解決方法をまとめています。

## 🆘 緊急時の対処法

### スクリプトが動かない場合

1. **ファイルの場所を確認**
   ```
   plugins/RPGText/messages/your_file.yml
   ```

2. **実行コマンドを確認**
   ```
   /rpgtext config <プレイヤー名> <ファイル名>/<セクション名>
   ```

3. **サーバーログを確認**
   - コンソールにエラーメッセージが表示されていないかチェック

## 📚 問題カテゴリ

### 🔧 一般的なエラー
- **[よくあるエラー](common-errors.md)** - 頻繁に発生する問題と解決策

### 🐛 デバッグ
- **[デバッグ方法](debugging-tips.md)** - 問題の特定と解決手順

## 🔍 問題の特定方法

### ステップ1: 症状の確認
- [ ] スクリプトが全く動かない
- [ ] 一部のコマンドが動かない
- [ ] 表示がおかしい
- [ ] エラーメッセージが出る

### ステップ2: 基本チェック
- [ ] ファイルが正しい場所にある
- [ ] コマンドの構文が正しい
- [ ] プレイヤー名・セクション名が正しい
- [ ] サーバーが RPGText に対応している

### ステップ3: 詳細調査
- [ ] サーバーログの確認
- [ ] 最小構成でのテスト
- [ ] 他のプレイヤーでも同様か確認

## 🚑 応急処置

### 緊急回避方法

```yaml
# 最小限の動作確認用テストファイル
test.yml:
  test_section:
    - テスト成功！
    - RPGTextは正常に動作しています
```

実行:
```
/rpgtext config <プレイヤー名> test.yml/test_section
```

### バックアップからの復旧

1. **設定ファイルの復元**
   ```
   plugins/RPGText/config.yml
   ```

2. **メッセージファイルの復元**
   ```
   plugins/RPGText/messages/
   ```

3. **プレイヤーデータの復元**
   ```
   plugins/RPGText/players/
   ```

## 📞 ヘルプリソース

### 情報収集の順序

1. **[よくあるエラー](common-errors.md)** - まずここをチェック
2. **[デバッグ方法](debugging-tips.md)** - 詳細な調査手順
3. **[制限事項](../reference/limitations.md)** - できないことの確認
4. **[ベストプラクティス](../reference/best-practices.md)** - 推奨される方法

### 外部リソース

- **公式ドキュメント** - 最新の仕様確認
- **コミュニティフォーラム** - 他のユーザーの事例
- **GitHub Issues** - 既知の問題と修正状況

## 🛠️ セルフヘルプツール

### 診断用スクリプト

```yaml
# diagnostic.yml - 診断用ファイル
system_check:
  - === RPGText 診断 ===
  - プレイヤー: %player%
  - レベル: %level%
  - 体力: %hp%
  - /score test_var 123
  - テスト変数: \\test_var\\
  - /singlesound minecraft:entity.experience_orb.pickup 1 1
  - 音声テスト完了
  - /color \a
  - 基本機能は正常です
  - /color \r
```

### ログ分析の手順

1. **エラーの種類を特定**
   - 構文エラー
   - 実行時エラー
   - 論理エラー

2. **エラー箇所の特定**
   - 行番号の確認
   - コマンド名の確認
   - パラメータの確認

3. **修正方針の決定**
   - 構文修正
   - ロジック変更
   - 設計見直し

## 📈 予防策

### 開発時の注意点

- **小さな単位でテスト** - 大きなファイルを一度に作らない
- **バックアップの習慣** - 定期的な保存
- **構文チェック** - YMLフォーマットの確認
- **段階的実装** - 基本機能から順次拡張

### 運用時の注意点

- **定期メンテナンス** - ファイルの整理
- **ログ監視** - エラーの早期発見
- **ユーザーフィードバック** - プレイヤーからの報告
- **更新計画** - 機能追加・修正のスケジュール

## 📊 問題分析テンプレート

問題報告や分析時に使用：

### 基本情報
- **サーバー環境**: Java版/統合版/バージョン
- **RPGTextバージョン**: プラグインバージョン
- **発生日時**: いつから問題が発生しているか
- **影響範囲**: 特定プレイヤー/全プレイヤー

### 現象
- **期待する動作**: 本来どうなるべきか
- **実際の動作**: 実際に何が起こるか
- **エラーメッセージ**: 表示されるエラー（あれば）
- **再現手順**: 問題を再現する方法

### 環境
- **ファイルパス**: 問題のあるファイルの場所
- **実行コマンド**: 使用したコマンド
- **関連ファイル**: 同時に使用している他のファイル
- **最近の変更**: 直近で変更した内容

### 対処履歴
- **試した解決策**: これまでに試したこと
- **結果**: それぞれの結果
- **参考資料**: 参照したドキュメントやフォーラム

## 🎯 効率的な問題解決

### 問題解決の優先順位

1. **緊急度高**: サーバー停止、全プレイヤー影響
2. **緊急度中**: 一部機能停止、特定プレイヤー影響
3. **緊急度低**: 表示の問題、軽微なバグ

### 解決手順のテンプレート

1. **問題の特定** (5分以内)
   - 症状の確認
   - 影響範囲の把握

2. **応急処置** (10分以内)
   - サービス継続のための最小限の対応
   - バックアップからの復旧

3. **根本原因分析** (30分以内)
   - ログ分析
   - コード確認
   - 環境確認

4. **恒久対策** (必要に応じて)
   - コード修正
   - 設計変更
   - 予防策実装

## 🔗 関連ドキュメント

- **[制限事項](../reference/limitations.md)** - できないことの確認
- **[ベストプラクティス](../reference/best-practices.md)** - 推奨される実装方法
- **[コマンドリファレンス](../commands/README.md)** - コマンド仕様の確認

## 💡 最後のアドバイス

問題解決は経験の積み重ねです。小さな問題から着実に解決していき、徐々に複雑な問題にも対応できるようになります。

**重要なポイント:**
- 焦らず段階的にアプローチ
- 小さな変更をこまめにテスト
- コミュニティの知見を活用
- 解決した問題は記録して次回に活かす

困ったときは、まず深呼吸をして、このドキュメントを順番に確認してみてください！